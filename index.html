<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–ø—É—Å: –ë–æ—Ç-–°–ø—ñ–≤–∞–≤—Ç–æ—Ä</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="spinner-overlay" class="hidden">
        <div class="spinner"></div>
    </div>

    <div id="toast-container"></div>

    <div id="create-edit-modal" class="modal hidden">
        <div class="modal-content">
            <h3 id="create-edit-modal-title"></h3>
            <input type="text" id="create-edit-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É">
            <div class="modal-buttons">
                <button id="create-edit-confirm-btn" class="btn-primary">OK</button>
                <button id="create-edit-cancel-btn" class="btn-secondary">–í—ñ–¥–º—ñ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div id="confirm-modal" class="modal hidden">
        <div class="modal-content">
            <h3 id="confirm-modal-message"></h3>
            <div class="modal-buttons">
                <button id="confirm-ok-btn" class="btn-primary">–¢–∞–∫</button>
                <button id="confirm-cancel-btn" class="btn-secondary">–ù—ñ</button>
            </div>
        </div>
    </div>


    <div id="login-container" class="container">
        <h2>–í—ñ—Ç–∞—é!</h2>
        <p>–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –≤–∞—à —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –ª–æ–≥—ñ–Ω, —â–æ–± –ø–æ—á–∞—Ç–∏.</p>
        <input type="text" id="login-input" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥, Mykhailo_V">
        <button id="login-button">–£–≤—ñ–π—Ç–∏</button>
    </div>

    <div id="app-container" class="container hidden">
        
        <div class="app-header">
            <p>–í–∏ —É–≤—ñ–π—à–ª–∏ —è–∫: <b id="username-display"></b></p>
            <button id="logout-button" class="btn-icon delete-btn">–í–∏–π—Ç–∏</button>
        </div>
        
        <hr>

        <div id="projects-container">
            <h2>–í–∞—à—ñ –ø—Ä–æ—î–∫—Ç–∏</h2>
            <button id="create-project-button" class="btn-icon export-btn" style="background-color: #28a745;">[ + ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –∫–Ω–∏–≥—É</button>
            <ul id="projects-list" class="project-card-list">
                </ul>
        </div>
    </div>

    <div id="workspace-container" class="container hidden">
        
        <div class="app-header">
            <h2 id="workspace-title">–ù–∞–∑–≤–∞ –ü—Ä–æ—î–∫—Ç—É</h2>
            <div id="save-status-indicator" class="autosave-status">
                <span id="save-status-dot" class="dot"></span>
                <span id="save-status-text" class="text">–ó–±–µ—Ä–µ–∂–µ–Ω–æ</span>
            </div>
            <button id="back-to-projects" style="background-color: #6c757d;">‚Üê –î–æ –ø—Ä–æ—î–∫—Ç—ñ–≤</button>
        </div>

        <nav id="workspace-nav">
            <button class="tab-btn" data-tab="dashboard-tab">üìà Dashboard</button>
            <button class="tab-btn active" data-tab="core-tab">üí° –Ø–¥—Ä–æ</button>
            <button class="tab-btn" data-tab="characters-tab">üë• –ü–µ—Ä—Å–æ–Ω–∞–∂—ñ</button>
            <button class="tab-btn" data-tab="chapters-tab">üìù –†–æ–∑–¥—ñ–ª–∏</button>
            <button class="tab-btn" data-tab="locations-tab">üó∫Ô∏è –õ–æ–∫–∞—Ü—ñ—ó</button>
            <button class="tab-btn" data-tab="plotlines-tab">üßµ –°—é–∂–µ—Ç–Ω—ñ –ª—ñ–Ω—ñ—ó</button>
            <button class="tab-btn" data-tab="notes-tab">üìì –ù–æ—Ç–∞—Ç–∫–∏</button>
            <button class="tab-btn" data-tab="chat-tab">üí¨ –ß–∞—Ç –∑ –û–ø—É—Å–æ–º</button>
        </nav>

        <div id="workspace-content">

            <div id="dashboard-tab" class="tab-content">
                <h3>üìà Dashboard: <span id="dashboard-project-title"></span></h3>
                <p>–ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥ –í–∞—à–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É.</p>
                <div class="dashboard-grid">
                    <div class="widget widget-full"> <button id="dashboard-write-btn" class="btn-primary-large"> ‚úèÔ∏è –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø–∏—Å–∞—Ç–∏ </button> </div>
                    <div class="widget"> <h4>–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤</h4> <div class="stat-number" id="dashboard-total-words">0</div> </div>
                    <div class="widget"> <h4>–ü—Ä–æ–≥—Ä–µ—Å –¥–æ –º–µ—Ç–∏ (50k)</h4> <div class="progress-bar"> <div class="progress-fill" id="dashboard-progress-fill"></div> </div> <div class="stat-label" id="dashboard-progress-label">0%</div> </div>
                    <div class="widget"> <h4>–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</h4> <div class="stat-label" id="dashboard-last-updated">...</div> </div>
                </div>
            </div>
            <div id="core-tab" class="tab-content active">
                <h3>üí° –Ø–¥—Ä–æ –Ü–¥–µ—ó</h3>
                <p>–ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó –≤–∞—à–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó. –ê–≤—Ç–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ –∑ –ø–æ–ª—è.</p>
                <label for="core-premise-input">–ü—Ä–æ —â–æ —Ü—è –∫–Ω–∏–≥–∞ (Logline):</label>
                <input type="text" id="core-premise-input" data-field="content.premise" placeholder="–û–¥–Ω–∏–º —Ä–µ—á–µ–Ω–Ω—è–º: —Ö—Ç–æ, —â–æ —Ä–æ–±–∏—Ç—å, —ñ —â–æ —Å—Ç–æ—ó—Ç—å –Ω–∞ –∫–æ–Ω—É?">
                <label for="core-theme-input">–ü—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–∞ / –ì–æ–ª–æ–≤–Ω–∞ –¥—É–º–∫–∞ (Theme):</label>
                <input type="text" id="core-theme-input" data-field="content.theme" placeholder="–ü—Ä–æ —â–æ *–Ω–∞—Å–ø—Ä–∞–≤–¥—ñ* —Ü—è –∫–Ω–∏–≥–∞ (–Ω–∞–ø—Ä., '—á–∏ –≤–∏–ø—Ä–∞–≤–¥–æ–≤—É—î –º–µ—Ç–∞ –∑–∞—Å–æ–±–∏?')">
                <label for="core-arc-input">–ì–æ–ª–æ–≤–Ω–∞ —Å—é–∂–µ—Ç–Ω–∞ –∞—Ä–∫–∞:</label>
                <input type="text" id="core-arc-input" data-field="content.mainArc" placeholder="–ù–∞–ø—Ä., '–ü–æ–¥–æ—Ä–æ–∂ –≥–µ—Ä–æ—è', '–ó –≥—Ä—è–∑—ñ –≤ –∫–Ω—è–∑—ñ', '–¢—Ä–∞–≥–µ–¥—ñ—è'">
            </div>
            <div id="characters-tab" class="tab-content">
                <h3>üë• –ü–µ—Ä—Å–æ–Ω–∞–∂—ñ</h3>
                <div class="list-editor-layout">
                    <div class="list-pane"> <button id="add-character-btn" class="btn-icon export-btn" style="width: 100%; background-color: #28a745;">[ + ] –ù–æ–≤–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂</button> <ul id="characters-list" class="item-list"></ul> </div>
                    <div id="character-editor-pane" class="editor-pane hidden">
                        <h4 id="character-editor-title">–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è</h4>
                        <label for="character-name-input">–Ü–º'—è:</label> <input type="text" id="character-name-input" placeholder="–Ü–º'—è, –ø—Ä—ñ–∑–≤–∏—Å—å–∫–æ...">
                        <label for="character-desc-input">–û–ø–∏—Å:</label> <textarea id="character-desc-input" rows="6" placeholder="–ó–æ–≤–Ω—ñ—à–Ω—ñ—Å—Ç—å, –º–æ—Ç–∏–≤–∞—Ü—ñ—è, –∑–≤–∏—á–∫–∏..."></textarea>
                        <label for="character-arc-input">–°—é–∂–µ—Ç–Ω–∞ –∞—Ä–∫–∞:</label> <textarea id="character-arc-input" rows="4" placeholder="–Ø–∫ —Ü–µ–π –ø–µ—Ä—Å–æ–Ω–∞–∂ –∑–º—ñ–Ω–∏—Ç—å—Å—è –ø—Ä–æ—Ç—è–≥–æ–º —ñ—Å—Ç–æ—Ä—ñ—ó?"></textarea>
                        <button id="delete-character-btn" class="btn-icon delete-btn" style="width: auto; margin-top: 10px;">–í–∏–¥–∞–ª–∏—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</button>
                    </div>
                    <div id="character-editor-placeholder" class="editor-pane-placeholder"> <p>‚Üê –û–±–µ—Ä—ñ—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∑—ñ —Å–ø–∏—Å–∫—É –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–æ–≥–æ.</p> </div>
                </div>
            </div>
            
            <div id="chapters-tab" class="tab-content">
                <h3>üìù –†–æ–∑–¥—ñ–ª–∏</h3>
                 <div class="list-editor-layout">
                    <div class="list-pane">
                        <button id="add-chapter-btn" class="btn-icon export-btn" style="width: 100%; background-color: #28a745;">[ + ] –ù–æ–≤–∏–π —Ä–æ–∑–¥—ñ–ª</button>
                        <div id="chapters-list" class="item-list card-list-container"></div>
                        <div class="list-summary" id="chapters-total-word-count"></div>
                    </div>
                    <div id="chapter-editor-pane" class="editor-pane hidden">
                        <h4 id="chapter-editor-title">–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è</h4>
                        <div class="input-row">
                            <div class="input-group">
                                <label for="chapter-title-input">–ù–∞–∑–≤–∞ —Ä–æ–∑–¥—ñ–ª—É:</label>
                                <input type="text" id="chapter-title-input" placeholder="–ù–∞–∑–≤–∞...">
                            </div>
                            <div class="input-group">
                                <label for="chapter-status-input">–°—Ç–∞—Ç—É—Å:</label>
                                <select id="chapter-status-input">
                                    <option value="–ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ">üóìÔ∏è –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ</option>
                                    <option value="–í —Ä–æ–±–æ—Ç—ñ">‚úèÔ∏è –í —Ä–æ–±–æ—Ç—ñ</option>
                                    <option value="–ó–∞–≤–µ—Ä—à–µ–Ω–æ">‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ</option>
                                    <option value="–ù–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—ñ">üîÑ –ù–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—ñ</option>
                                    <option value="–ü–æ—Ç—Ä–µ–±—É—î —É–≤–∞–≥–∏">‚ùì –ü–æ—Ç—Ä–µ–±—É—î —É–≤–∞–≥–∏</option>
                                </select>
                            </div>
                        </div>
                        
                        <label>–°–∏–Ω–æ–ø—Å–∏—Å (–∑ –∫–∞—Ä—Ç–∫–∏):</label>
                        <div id="chapter-editor-synopsis" class="editor-synopsis-preview">
                            –ù–µ–º–∞—î —Å–∏–Ω–æ–ø—Å–∏—Å—É...
                        </div>

                        <label for="chapter-text-input">–¢–µ–∫—Å—Ç —Ä–æ–∑–¥—ñ–ª—É:</label>
                        <textarea id="chapter-text-input" rows="15" placeholder="–ü–æ—á–Ω—ñ—Ç—å –ø–∏—Å–∞—Ç–∏ —Ç—É—Ç..."></textarea>
                        <div class="editor-word-count" id="chapter-current-word-count">0 —Å–ª—ñ–≤</div>
                        <button id="delete-chapter-btn" class="btn-icon delete-btn" style="width: auto; margin-top: 10px;">–í–∏–¥–∞–ª–∏—Ç–∏ —Ä–æ–∑–¥—ñ–ª</button>
                    </div>
                    <div id="chapter-editor-placeholder" class="editor-pane-placeholder">
                        <p>‚Üê –û–±–µ—Ä—ñ—Ç—å —Ä–æ–∑–¥—ñ–ª –∑—ñ —Å–ø–∏—Å–∫—É –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π.</p>
                    </div>
                </div>
            </div>

            <div id="locations-tab" class="tab-content">
                <h3>üó∫Ô∏è –õ–æ–∫–∞—Ü—ñ—ó</h3>
                 <div class="list-editor-layout">
                    <div class="list-pane"> <button id="add-location-btn" class="btn-icon export-btn" style="width: 100%; background-color: #28a745;">[ + ] –ù–æ–≤–∞ –ª–æ–∫–∞—Ü—ñ—è</button> <ul id="locations-list" class="item-list"></ul> </div>
                    <div id="location-editor-pane" class="editor-pane hidden">
                        <h4 id="location-editor-title">–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è</h4>
                        <label for="location-name-input">–ù–∞–∑–≤–∞ –ª–æ–∫–∞—Ü—ñ—ó:</label> <input type="text" id="location-name-input" placeholder="–ù–∞–∑–≤–∞...">
                        <label for="location-desc-input">–û–ø–∏—Å:</label> <textarea id="location-desc-input" rows="10" placeholder="–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞, –∫–ª—é—á–æ–≤—ñ —Ä–∏—Å–∏, –∑–∞–ø–∞—Ö–∏, –∑–≤—É–∫–∏..."></textarea>
                        <button id="delete-location-btn" class="btn-icon delete-btn" style="width: auto; margin-top: 10px;">–í–∏–¥–∞–ª–∏—Ç–∏ –ª–æ–∫–∞—Ü—ñ—é</button>
                    </div>
                    <div id="location-editor-placeholder" class="editor-pane-placeholder"> <p>‚Üê –û–±–µ—Ä—ñ—Ç—å –ª–æ–∫–∞—Ü—ñ—é –∑—ñ —Å–ø–∏—Å–∫—É –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É.</p> </div>
                </div>
            </div>
            <div id="plotlines-tab" class="tab-content">
                <h3>üßµ –°—é–∂–µ—Ç–Ω—ñ –ª—ñ–Ω—ñ—ó</h3>
                 <div class="list-editor-layout">
                    <div class="list-pane"> <button id="add-plotline-btn" class="btn-icon export-btn" style="width: 100%; background-color: #28a745;">[ + ] –ù–æ–≤–∞ –ª—ñ–Ω—ñ—è</button> <ul id="plotlines-list" class="item-list"></ul> </div>
                    <div id="plotline-editor-pane" class="editor-pane hidden">
                        <h4 id="plotline-editor-title">–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è</h4>
                        <label for="plotline-title-input">–ù–∞–∑–≤–∞ (A-Plot, B-Plot, –∞—Ä–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞):</label> <input type="text" id="plotline-title-input" placeholder="–ù–∞–∑–≤–∞...">
                        <label for="plotline-desc-input">–û–ø–∏—Å / –ö–ª—é—á–æ–≤—ñ –ø–æ–¥—ñ—ó:</label> <textarea id="plotline-desc-input" rows="10" placeholder="–û–ø–∏—à—ñ—Ç—å –∫–ª—é—á–æ–≤—ñ —Ç–æ—á–∫–∏ —Ü—ñ—î—ó —Å—é–∂–µ—Ç–Ω–æ—ó –ª—ñ–Ω—ñ—ó..."></textarea>
                        <button id="delete-plotline-btn" class="btn-icon delete-btn" style="width: auto; margin-top: 10px;">–í–∏–¥–∞–ª–∏—Ç–∏ –ª—ñ–Ω—ñ—é</button>
                    </div>
                    <div id="plotline-editor-placeholder" class="editor-pane-placeholder"> <p>‚Üê –û–±–µ—Ä—ñ—Ç—å —Å—é–∂–µ—Ç–Ω—É –ª—ñ–Ω—ñ—é –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É.</p> </div>
                </div>
            </div>
            <div id="notes-tab" class="tab-content">
                <h3>üìì –ù–æ—Ç–∞—Ç–∫–∏ —Ç–∞ –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è</h3>
                <p>–í–∞—à –æ—Å–æ–±–∏—Å—Ç–∏–π –±–ª–æ–∫–Ω–æ—Ç. –ê–≤—Ç–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ –∑ –ø–æ–ª—è.</p>
                <label for="notes-general-input">–ó–∞–≥–∞–ª—å–Ω—ñ –Ω–æ—Ç–∞—Ç–∫–∏:</label>
                <textarea id="notes-general-input" data-field="content.notes" rows="10" placeholder="–ó–∞–ø–∏—Å—É–π—Ç–µ –±—É–¥—å-—è–∫—ñ —ñ–¥–µ—ó, –¥—É–º–∫–∏, –¥—ñ–∞–ª–æ–≥–∏..."></textarea>
                <label for="notes-research-input">–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ç–∞ –ü–æ—Å–∏–ª–∞–Ω–Ω—è:</label>
                <textarea id="notes-research-input" data-field="content.research" rows="5" placeholder="–í—Å—Ç–∞–≤—Ç–µ —Å—é–¥–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è, —Ñ–∞–∫—Ç–∏, —ñ—Å—Ç–æ—Ä–∏—á–Ω—ñ –¥–æ–≤—ñ–¥–∫–∏..."></textarea>
            </div>
            <div id="chat-tab" class="tab-content">
                <h3>üí¨ –ß–∞—Ç –∑ –û–ø—É—Å–æ–º</h3>
                <p>–û–ø—É—Å –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—å–æ–≥–æ, —â–æ –≤–∏ –ø–∏—à–µ—Ç–µ –≤ —ñ–Ω—à–∏—Ö –≤–∫–ª–∞–¥–∫–∞—Ö.</p>
                <div id="chat-window"> </div>
                <div class="chat-input-area">
                    <input type="text" id="userInput" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å —â–æ—Å—å...">
                    <button id="sendButton">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
                </div>
            </div>

        </div> 
    </div> 
    
    <footer id="app-footer">
        <p>
            Gemini OpusAI | v<span id="version-number">0.0.0</span> | &copy; 2025 Mykhailo Voronianskyi
        </p>
    </footer>

    <div id="project-context-menu" class="context-menu hidden">
        <button id="context-edit-btn">–ó–º—ñ–Ω–∏—Ç–∏ –Ω–∞–∑–≤—É</button>
        <button id="context-export-btn">–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ (.txt)</button>
        <button id="context-delete-btn">–í–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.2/Sortable.min.js"></script>
    <script src="client.js" defer></script>
</body>
</html>